      - name: Launch VNC Viewer
        run: |
          echo "=== Launching VNC Viewer ==="
          
          # Clean up any existing instances
          pkill -f "VNC Viewer" 2>/dev/null || true
          pkill -f "VNC-Viewer" 2>/dev/null || true
          sleep 2
          
          # Determine which app to launch
          if [ -d "/Applications/VNC Viewer.app" ]; then
            APP_PATH="/Applications/VNC Viewer.app"
            APP_NAME="VNC Viewer"
          elif [ -n "$INSTALLED_APP_NAME" ] && [ -d "/Applications/$INSTALLED_APP_NAME" ]; then
            APP_PATH="/Applications/$INSTALLED_APP_NAME"
            APP_NAME="$INSTALLED_APP_NAME"
            APP_NAME="${APP_NAME%.app}"  # Remove .app extension
          else
            echo "âŒ VNC Viewer not found in Applications!"
            exit 1
          fi
          
          echo "Launching VNC Viewer from: $APP_PATH"
          echo "App name: $APP_NAME"
          
          open -a "$APP_PATH"
          
          echo "APP_NAME=\"$APP_NAME\"" >> $GITHUB_ENV
          echo "APP_PATH=\"$APP_PATH\"" >> $GITHUB_ENV
          
          # Wait for app to launch
          echo "Waiting for VNC Viewer to launch..."
          for i in {1..30}; do
            if pgrep -f "$APP_NAME" > /dev/null; then
              echo "âœ… $APP_NAME process found (attempt $i)"
              break
            fi
            sleep 1
          done
          
          # Additional wait for UI to load
          sleep 5
          
          # Take screenshot after launch
          launch_file="$SCREENSHOT_DIR/02_after_launch_$(date +%H%M%S).png"
          screencapture -x "$launch_file"
          echo "ðŸ“¸ Launch screenshot taken"
